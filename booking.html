<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Practical:AI Empowering Kiwi Businesses with Hands-On AI Skills</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.9.3/css/bulma.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="icon" type="image/png" href="/content/WhiteLogo-OnTransparent.png">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/3.2.31/vue.global.prod.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/2.0.3/marked.min.js"></script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-F1CLVJLJXE"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-F1CLVJLJXE');
    </script>
    <style>
        .hero-body {
            background-color: #f5f5f5;
        }
        .navbar {
            background-color: black;
        }
        .navbar-item img {
            max-height: 3rem;
        }
        .section:nth-child(even) {
            background-color: #f5f5f5;
        }
        .card {
            height: 100%;
        }
        .footer {
            background-color: black;
            color: white;
        }
        .custom-button {
            transition: background-color 0.3s, color 0.3s;
        }
        .custom-button:hover {
            border-color: black !important;
            background-color: #ffffff !important;
            color: black !important;
        }
    </style>
    <script>
        // Function to get query parameter value
        function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }
        
        // Function to set iframe src
        function setIframeSrc() {
            const eventCode = getQueryParam('eventCode');
            if (eventCode) {
                const iframe = document.getElementById('bookwhen-iframe');
                if (iframe) {
                    iframe.src = `https://bookwhen.com/pai-foundations/iframe/e/${eventCode}`;
                    window.addEventListener('message', function(event) {
                        // Make sure the message is from Bookwhen
                        if (event.origin !== 'https://bookwhen.com') return;

                        try {
                            iframe.style.height = event.data.height + 'px';
                        } catch (e) {
                            console.error('Error parsing message from Bookwhen:', e);
                        }
                    });
                } else {
                    console.error('Iframe element not found');
                }
            }
        }

        // Run the setIframeSrc function after the DOM is fully loaded
        document.addEventListener('DOMContentLoaded', setIframeSrc);
    </script>
</head>
<body class="has-navbar-fixed-top">
    <nav class="navbar is-info is-fixed-top has-background-black">
        <div class="container">
            <div class="navbar-brand">
                <a class="navbar-item" href="/index.html#hero">
                    <img src="/content/WhiteLogo-OnTransparent.png"  alt="Logo" />
                </a>
            </div>
            <div id="navbarMenuHeroB" class="navbar-menu">
                <div class="navbar-end">
                    <a class="navbar-item" href="/index.html#hero"> Home </a>
                    <a class="navbar-item has-background-white has-text-black" href="/index.html#workshops"> Workshops </a>
                    <a class="navbar-item" href="/index.html#faq"> FAQ </a>
                    <a class="navbar-item"href="/index.html#contact"> Contact </a>
                </div>
            </div>
        </div>
    </nav>
    <section class="section pt-2">
        <div class="container">
            <iframe id="bookwhen-iframe" frameborder="0" scrolling="no" seamless="seamless" style="display:block;border:none;width:100%;height:820px;"></iframe>
        </div>
    </section>
    <section class="section">
        <div class="container">
            <div id="app" class="content">
                <div class="content" v-html="courseMarkdown"></div>
                <a class="button custom-button is-large" @click="scrollToSection('bookwhen-iframe')"> Book </a>
            </div>
        </div>
    </section>
    <script>
        const app = Vue.createApp({
            data() {
                return {
                    courseMarkdown: '',
                }
            },
            methods: {
                async fetchContent() {
                    try {
                        const response = await fetch('/practicalai-content.md');
                        const text = await response.text();
                        this.parseContent(text);
                    } catch (error) {
                        console.error('Error fetching content:', error);
                    }
                },
                parseContent(content) {
                    const sections = content.split(/^## /m).slice(1);
                    sections.forEach(section => {
                        const [title, ...contentLines] = section.trim().split('\n');
                        if(title == 'Foundations Course Details') {
                            this.courseMarkdown = marked.parse(contentLines.join('\n').trim());
                        }
                    });
                },
                scrollToSection(sectionId) {
                    const element = document.getElementById(sectionId);
                        element.scrollIntoView({ behavior: 'smooth' });
                }
            },
            mounted() {
                this.fetchContent();
            }
        });

        app.mount('#app');
    </script>
</body>
</html>