<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Practical:AI Empowering Kiwi Businesses with Hands-On AI Skills</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.9.3/css/bulma.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="/style/base.css">
    <link rel="icon" type="image/png" href="/content/WhiteLogo-OnTransparent.png">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-F1CLVJLJXE"></script>
    <script async src="https://www.tiktok.com/embed.js"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-F1CLVJLJXE');
    </script>
</head>
<body class="has-navbar-fixed-top">
    <div id="app"></div>

    <script type="importmap">
        {
            "imports": {
                "vue": "https://cdnjs.cloudflare.com/ajax/libs/vue/3.2.41/vue.esm-browser.prod.js",
                "vue-router": "https://cdnjs.cloudflare.com/ajax/libs/vue-router/4.1.5/vue-router.esm-browser.min.js",
                "@vue/devtools-api": "https://unpkg.com/@vue/devtools-api@6.4.5/lib/esm/index.js",
                "/utils": "/utils.js"
            }
        }
    </script>
    <script type="module">
        import { createApp, ref, onMounted } from 'vue';
        import { createRouter, createWebHashHistory } from 'vue-router';
        import { ContentLayout, NavBar, SiteFooter } from './components/base.js';
        import { BlogPost, BlogListing } from './components/blog.js';
        import { fetchContent } from '/utils';
        
        const routes = [
    { 
        path: '/', 
        component: ContentLayout,
        props: {
            contentPath: '/content/yaml/home.yml',
            workshopsPath: '/content/yaml/workshops.yml'
        }
    },
    { 
        path: '/booking/:eventCode', 
        component: ContentLayout,
        props: {
            contentPath: '/content/yaml/foundations.yml'
        }
    },
    { path: '/blog', component: BlogListing },
    { path: '/blog/:id', component: BlogPost }
];
    
        const router = createRouter({
            history: createWebHashHistory(),
            routes,
            scrollBehavior(to, from, savedPosition) {
                return savedPosition || { top: 0 };
            }
        });
    
        const app = createApp({
            setup() {
                const headerFooter = ref(null);
                onMounted(async () => {
                    headerFooter.value = await fetchContent('/content/yaml/headerFooter.yml');
                });
                return { headerFooter };
            },
            template: `
                <nav-bar v-if="headerFooter" :logo="headerFooter.logo" :menu-items="headerFooter.menuItems"></nav-bar>
                <router-view></router-view>
                <site-footer v-if="headerFooter" :footerData="headerFooter.footer"></site-footer>
            `
        });
    
        app.component('content-layout', ContentLayout);
        app.component('nav-bar', NavBar);
        app.component('site-footer', SiteFooter);
        app.component('blog-post', BlogPost);
        app.component('blog-listing', BlogListing);
    
        app.use(router);
        app.mount('#app');
    </script>
</body>
</html>